<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pistacho é›ªèŒ„è¯„åˆ†ä½“ç³»</title>
    <!-- å¼•å…¥ Tailwind CSS CDNï¼Œç”¨äºå¿«é€Ÿæ„å»ºç¾è§‚çš„ç§»åŠ¨ç«¯ç•Œé¢ -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* è‡ªå®šä¹‰æ»šåŠ¨æ¡æ ·å¼ï¼Œå¢åŠ å®‰å“åº”ç”¨è´¨æ„Ÿ */
        ::-webkit-scrollbar { width: 4px; }
        ::-webkit-scrollbar-thumb { background-color: #6366f1; border-radius: 2px; }
        .rating-input:checked + .rating-label {
            background-color: #4f46e5; /* é€‰ä¸­æ—¶çš„æ·±è‰²èƒŒæ™¯ */
            color: white;
            border-color: #4f46e5;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.06);
        }
    </style>
</head>
<body class="bg-gray-100 font-sans antialiased min-h-screen">

    <!-- é¡¶éƒ¨å›ºå®šæ ‡é¢˜æ  -->
    <header class="sticky top-0 z-10 bg-indigo-600 shadow-xl">
        <div class="max-w-xl mx-auto py-3 px-4 sm:px-6 lg:px-8">
            <h1 class="text-2xl font-bold text-white tracking-wider">
                Pistacho è¯„åˆ† <span class="text-indigo-200 text-sm">v1.0</span>
            </h1>
        </div>
    </header>

    <!-- ä¸»å†…å®¹åŒº -->
    <main class="max-w-xl mx-auto px-4 py-6 sm:px-6 lg:px-8">
        <form id="ratingForm" onsubmit="event.preventDefault(); calculateAndDisplayResults();">
            <!-- 1. åŸºæœ¬ä¿¡æ¯è¾“å…¥ -->
            <section class="mb-8 p-4 bg-white rounded-xl shadow-lg">
                <h2 class="text-lg font-semibold text-gray-800 mb-4 border-b pb-2">é›ªèŒ„åŸºæœ¬ä¿¡æ¯ (è®°å½•ç”¨)</h2>
                <div class="space-y-4">
                    <input type="text" id="brand" placeholder="å“ç‰Œ Brand" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500">
                    <input type="text" id="model" placeholder="å‹å· Model" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500">
                    <input type="text" id="size" placeholder="å°ºå¯¸ Size" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500">
                    <input type="text" id="origin" placeholder="äº§åœ° Origin" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500">
                </div>
            </section>

            <!-- 2. ä¸»è§‚å°è±¡è¯„åˆ†åŒº (åŠ¨æ€ç”Ÿæˆ) -->
            <section id="ratingInputs" class="space-y-6">
                <!-- è¯„åˆ†é¡¹å°†ç”± JavaScript åŠ¨æ€æ’å…¥ -->
            </section>

            <!-- 3. æäº¤æŒ‰é’® -->
            <div class="mt-10 mb-20">
                <button type="submit" class="w-full py-4 text-xl font-bold text-white bg-indigo-600 rounded-xl hover:bg-indigo-700 transition duration-150 shadow-lg shadow-indigo-300/50 focus:outline-none focus:ring-4 focus:ring-indigo-500 focus:ring-opacity-50">
                    è®¡ç®— Pistacho æœ€ç»ˆè¯„åˆ†
                </button>
            </div>
        </form>

        <!-- 4. ç»“æœå±•ç¤ºåŒº (åˆå§‹éšè—) -->
        <section id="resultsSection" class="hidden fixed inset-0 bg-gray-100 z-20 overflow-y-auto pt-4 pb-20">
            <div class="p-4">
                <div class="bg-white rounded-xl shadow-2xl p-6 mb-6">
                    <h2 class="text-2xl font-extrabold text-indigo-600 mb-4">æœ€ç»ˆå®šçº§ç»“æœ</h2>
                    
                    <div id="finalGradeDisplay" class="text-center mb-6 p-4 rounded-xl bg-gray-50 border border-gray-200">
                        <p class="text-sm text-gray-500">Pistacho ç­‰çº§</p>
                        
                        <!-- æ ¸å¿ƒä¿®æ”¹ï¼šä½¿ç”¨ flex å®¹å™¨æ¥å±•ç¤º P.I.S.T.A.C.H.O. å¹¶çªå‡ºé‡ç‚¹å­—æ¯ -->
                        <div id="pistachoAcronymDisplay" class="flex justify-center items-end space-x-1 mb-2">
                            <!-- Dynamic Letters Go Here -->
                        </div>

                        <p class="text-xl font-semibold" id="resultGradeName">---</p>
                    </div>

                    <div class="flex justify-between items-center bg-indigo-50 p-3 rounded-lg border-l-4 border-indigo-600">
                        <span class="text-gray-700 font-medium">æ€»åˆ†æ•° (æ»¡åˆ†100)</span>
                        <span id="resultScore" class="text-2xl font-extrabold text-indigo-700">0.0</span>
                    </div>
                </div>

                <div class="bg-white rounded-xl shadow-2xl p-6 mb-6">
                    <h2 class="text-xl font-bold text-gray-800 mb-4">é›ªèŒ„ä¿¡æ¯å›é¡¾</h2>
                    <ul id="infoSummary" class="text-gray-600 space-y-2">
                        <!-- ä¿¡æ¯å°†åœ¨æ­¤å¤„å¡«å…… -->
                    </ul>
                </div>

                <div class="bg-white rounded-xl shadow-2xl p-6 mb-6">
                    <h2 class="text-xl font-bold text-gray-800 mb-4">ğŸ† è·å¾—çš„æˆå°± (Achievements)</h2>
                    <ul id="achievementList" class="space-y-2 text-sm text-gray-700 list-disc pl-5">
                        <!-- æˆå°±åˆ—è¡¨å°†åœ¨æ­¤å¤„å¡«å…… -->
                    </ul>
                </div>
                
                <button onclick="document.getElementById('resultsSection').classList.add('hidden')" class="w-full py-3 text-lg font-bold text-indigo-600 bg-white border border-indigo-600 rounded-xl hover:bg-indigo-50 transition duration-150 shadow-md">
                    è¿”å›ç»§ç»­è¯„ä»·
                </button>
            </div>
        </section>
    </main>

    <!-- æ ¸å¿ƒæ•°æ®å’Œé€»è¾‘ -->
    <script>
        // =========================================================
        // æ ¸å¿ƒæ•°æ®ç»“æ„: Pistacho é›ªèŒ„è¯„ä»·ä½“ç³»
        // æƒé‡ã€ç¨‹åº¦ã€å¾—åˆ†ã€æˆå°±ã€ç±»å‹ï¼ˆå•é€‰/å¤šé€‰ï¼‰
        // =========================================================

        const CIGAR_RATING_DATA = [
            // --- å¤–è§‚ä¸ç»“æ„ (æƒé‡åˆè®¡: 75) ---
            { impression: "èŒ„æ ‡é«˜çº§æ„Ÿ", weight: 15, degrees: [{ level: "ç®€é™‹", score: 0.10, achievement: "åœ°æ‘Šè´§" }, { level: "ä¸­è§„ä¸­çŸ©", score: 0.50, achievement: "ç¤¼å“è£…" }, { level: "æ¼‚äº®", score: 0.70, achievement: "å¥¢ä¾ˆå“" }, { level: "é«˜çº§æ„Ÿ", score: 1.00, achievement: "å¤§å¸ˆé¦†è—" }] },
            { impression: "èŒ„è¡£", weight: 15, degrees: [{ level: "ç®€é™‹", score: 0.10, achievement: "å»‰ä»·å¤–å¥—" }, { level: "ä¸­è§„ä¸­çŸ©", score: 0.50, achievement: "æ­£è£…å‡ºå¸­" }, { level: "æ¼‚äº®", score: 0.70, achievement: "ä¸ç»¸è§¦æ„Ÿ" }, { level: "é«˜çº§æ„Ÿ", score: 1.00, achievement: "é¡¶çº§çš®å…·" }] },
            { impression: "å·å·¥", weight: 15, degrees: [{ level: "ä¸åˆæ ¼", score: 0.10, achievement: "åŒ†å¿™èµ¶å·¥" }, { level: "æ­£å¸¸", score: 0.50, achievement: "ç†Ÿç»ƒå·¥äºº" }, { level: "æ¼‚äº®", score: 0.70, achievement: "ç²¾é›•ç»†ç¢" }, { level: "å®Œç¾", score: 1.00, achievement: "æµ‘ç„¶å¤©æˆ" }] },
            { impression: "å¸é˜»", weight: 15, degrees: [{ level: "æ¾", score: 0.50, achievement: "è‡ªç”±è½ä½“" }, { level: "å®Œç¾", score: 1.00, achievement: "å¤©é€‰ä¹‹å¸" }, { level: "åç´§", score: 0.50, achievement: "å€”å¼ºè„¾æ°”" }, { level: "å µå¡", score: 0.00, achievement: "ç‰©ç†ç»ç¼˜" }] },
            { impression: "ç‡ƒçƒ§çº¿", weight: 15, degrees: [{ level: "å‡åŒ€", score: 1.00, achievement: "æ¿€å…‰åˆ‡å‰²" }, { level: "ç•¥ä¸å‡åŒ€", score: 0.70, achievement: "è‰ºæœ¯ä¿®é¥°" }, { level: "æŒç»­ä¸å‡åŒ€", score: 0.10, achievement: "è‡ªç”±å‘æŒ¥" }] },

            // --- å¯åŠ¨ä¸çƒŸç° (æƒé‡åˆè®¡: 15) ---
            { impression: "å‰3å£æ„Ÿè§‰", weight: 5, degrees: [{ level: "çœ¼å‰ä¸€äº®", score: 1.00, achievement: "å¼€åœºçˆ†æ£š" }, { level: "æœ‰æœŸå¾…", score: 0.70, achievement: "ç¨³æ­¥å‡æ¸©" }, { level: "ä¸­è§„ä¸­çŸ©", score: 0.50, achievement: "å¹³æ·¡å¦‚æ°´" }, { level: "ä¼°è®¡ä¸æ€ä¹ˆæ ·", score: 0.10, achievement: "åŠé€€è­¦å‘Š" }] },
            { impression: "çƒŸç°å½¢æ€", weight: 10, degrees: [{ level: "å®Œç¾å¯ä»¥å°è¯•æŒèŒ„", score: 1.00, achievement: "åŸƒè²å°”é“å¡”" }, { level: "éœ€è¦ä¸»åŠ¨å¼¹", score: 0.70, achievement: "æ¯”è¨æ–œå¡”" }, { level: "è‡ªåŠ¨è„±è½", score: 0.30, achievement: "é›·å³°å¡”" }] },

            // --- é¦™æ°”ä¸é£å‘³ (æƒé‡åˆè®¡: 75) ---
            { impression: "ç¬¬äºŒé¦™æ°”å®œäººå¼ºåº¦", weight: 15, degrees: [{ level: "æ²¡æœ‰", score: 0.00, achievement: "å—…è§‰å¤±çµ" }, { level: "ä¸€ç‚¹ç‚¹é¦™", score: 0.30, achievement: "æ˜™èŠ±ä¸€ç°" }, { level: "å¾ˆé¦™", score: 0.70, achievement: "èŠ³é¦™å››æº¢" }, { level: "æé¦™", score: 1.00, achievement: "é¦™æ°´å–·é›¾" }] },
            { impression: "ç¬¬äºŒé¦™æ°”é«˜çº§åº¦", weight: 15, degrees: [{ level: "å®¹æ˜“åœ¨å…¶ä»–èŒ„è·å¾—", score: 0.30, achievement: "å¤§ä¼—æƒ…äºº" }, { level: "ä¸å®¹æ˜“åœ¨å…¶ä»–èŒ„è·å¾—ä½†æœ‰å¶ç¢°åˆ°", score: 0.70, achievement: "å¶ç„¶ç›¸é‡" }, { level: "ç‹¬ç‰¹", score: 1.00, achievement: "ç‹¬ä¸€æ— äºŒ" }] },
            { impression: "é¦™æ°”æŒç»­åº¦", weight: 15, degrees: [{ level: "å‰æ®µæœ‰", score: 0.333, achievement: "çŸ­æš‚é—ªå…‰" }, { level: "ä¸­æ®µæœ‰", score: 0.666, achievement: "ç¨³å¥ç»­èˆª" }, { level: "åç«¯æœ‰", score: 1.00, achievement: "é™ªä¼´åˆ°è€" }] },
            { impression: "å¤šé‡ï¼ˆç¬¬ä¸‰ï¼‰é¦™æ°”", weight: 15, degrees: [{ level: "æ²¡æœ‰", score: 0.00, achievement: "å•æ ¸å¤„ç†" }, { level: "æœ‰", score: 1.00, achievement: "å¤šæ ¸è¿è¡Œ" }] },
            { impression: "å¤šé‡ï¼ˆç¬¬ä¸‰ï¼‰é¦™æ°”æŒç»­åº¦", weight: 15, degrees: [{ level: "å‰æ®µæœ‰", score: 0.333, achievement: "å°é²œé™å®š" }, { level: "ä¸­æ®µæœ‰", score: 0.666, achievement: "æ·±åº¦ä½“éªŒ" }, { level: "åç«¯æœ‰", score: 1.00, achievement: "å°¾éŸµæ‚ é•¿" }] },
            
            // --- å˜åŒ–ä¸ç‡ƒçƒ§ (æƒé‡åˆè®¡: 45) ---
            { impression: "ä¸‰æ®µå˜åŒ–", weight: 15, degrees: [{ level: "å˜åŒ–æ˜æ˜¾", score: 1.00, achievement: "è¿‡å±±è½¦" }, { level: "ä¼¼ä¹æœ‰å˜åŒ–", score: 0.50, achievement: "æ¸è¿›å˜å¥" }, { level: "å§‹ç»ˆå¦‚ä¸€", score: 0.10, achievement: "çº¿æ€§è¾“å‡º" }] },
            { impression: "ç‡ƒçƒ§æŒç»­", weight: 15, degrees: [{ level: "ä¸€æ ¹åˆ°åº•", score: 1.00, achievement: "æ°¸åŠ¨æœº" }, { level: "å¶å°”è¡¥ç«", score: 0.70, achievement: "ç«åŠ›æ”¯æ´" }, { level: "ä¸æ–­è¡¥ç«", score: 0.30, achievement: "æ¶ˆé˜²é˜Ÿå‘˜" }, { level: "ç‚¹åˆ°è¯•å›¾æ”¾å¼ƒ", score: 0.00, achievement: "åŠé€€é‡æ¥" }] },
            { impression: "çƒŸé›¾é‡", weight: 15, degrees: [{ level: "æ²¡æœ‰", score: 0.00, achievement: "æ— çƒŸåŒº" }, { level: "å°‘", score: 0.50, achievement: "éšå£«æ¨¡å¼" }, { level: "æ­£å¸¸", score: 1.00, achievement: "æ•ˆç‡è¾¾äºº" }, { level: "æµ“", score: 0.80, achievement: "è’¸æ±½åˆ—è½¦" }, { level: "çƒŸå›±", score: 0.50, achievement: "ç«ç‚¬è¾¾äºº" }] },

            // --- å°¾æ®µä¸æ•´ä½“æ„Ÿå— (æƒé‡åˆè®¡: 70) ---
            { impression: "å°¼å¤ä¸æµ“åº¦", weight: 10, degrees: [{ level: "æ™®é€š", score: 1.00, achievement: "åŸºç¡€æŒ‘æˆ˜" }, { level: "å›°éš¾", score: 0.90, achievement: "æ„å¿—è€ƒéªŒ" }, { level: "å™©æ¢¦", score: 0.70, achievement: "çµé­‚æ‹·é—®" }, { level: "åœ°ç‹±", score: 0.30, achievement: "è§é˜ç‹" }] },
            { impression: "è¿‡é¼»é¡ºç•…åº¦", weight: 15, degrees: [{ level: "æ— æ„Ÿ", score: 0.50, achievement: "å‘¼å¸è‡ªå¦‚" }, { level: "æŸ”é¡º", score: 1.00, achievement: "ä¸æ»‘é€šè¡Œ" }, { level: "ç•¥æœ‰åˆºæ¿€", score: 0.70, achievement: "é¼»è…”è­¦æŠ¥" }, { level: "è¾›è¾£", score: 0.30, achievement: "åƒè¾£å¤§èµ›" }] },
            { impression: "çƒŸå±è‚¡æŠ½å®Œæ¸´æœ›åº¦", weight: 10, degrees: [{ level: "é©¬ä¸Šæƒ³æ”¾å¼ƒ", score: 0.00, achievement: "åŠæ—¶æ­¢æŸ" }, { level: "æŠ½åˆ°èŒ„æ ‡", score: 0.30, achievement: "å°Šé‡æ ‡ç­¾" }, { level: "æŠ½åˆ°çƒ«æ‰‹ä¸ºæ­¢", score: 0.70, achievement: "æé™æŒ‘æˆ˜" }, { level: "æŠ½åˆ°ç‰™ç­¾çƒ§å®Œä¸ºæ­¢", score: 1.00, achievement: "æ¦¨å¹²ä»·å€¼" }] },
            { impression: "è·å¾—å®¹æ˜“åº¦", weight: 10, degrees: [{ level: "å®¹æ˜“", score: 1.00, achievement: "å”¾æ‰‹å¯å¾—" }, { level: "æ™®é€š", score: 0.80, achievement: "å¸‚åœºæµé€š" }, { level: "å›°éš¾", score: 0.50, achievement: "é¢„çº¦æ’é˜Ÿ" }, { level: "åƒè½½éš¾é€¢", score: 0.30, achievement: "å¯»å®çŒäºº" }] },
            { impression: "æ•´ä½“è®°å¿†åº¦", weight: 15, degrees: [{ level: "èŠ¸èŠ¸ä¼—ç”Ÿ", score: 0.00, achievement: "è·¯äººç”²" }, { level: "ç•¥æœ‰å°è±¡", score: 0.30, achievement: "é—ªå…‰ä¸€åˆ»" }, { level: "å¿µå¿µä¸å¿˜", score: 0.70, achievement: "åˆå¤œæ¢¦å›" }, { level: "æ¢¦é‡Œå¯»å¥¹åƒç™¾åº¦", score: 1.00, achievement: "åˆ»éª¨é“­å¿ƒ" }] }
        ];

        // æ€»æƒé‡ (æ‰€æœ‰ weight ç›¸åŠ : 75 + 15 + 75 + 45 + 70 = 280)
        const TOTAL_WEIGHT = 280;

        // =========================================================
        // æ ¸å¿ƒé€»è¾‘å‡½æ•°
        // =========================================================

        /**
         * åŠ¨æ€ç”Ÿæˆè¯„åˆ†è¡¨æ ¼çš„ HTML ç»“æ„
         */
        function renderRatingForm() {
            const container = document.getElementById('ratingInputs');
            let html = '';

            CIGAR_RATING_DATA.forEach((item, index) => {
                const impressionId = `imp-${index}`;
                
                // è¯„åˆ†é¡¹æ ‡é¢˜
                html += `
                    <div class="p-4 bg-white rounded-xl shadow-lg">
                        <h3 class="text-base font-semibold text-gray-800 mb-3 border-b pb-2">
                            ${item.impression} <span class="text-xs text-gray-500 font-normal"> (æƒé‡: ${item.weight})</span>
                        </h3>
                        <div class="grid grid-cols-2 sm:grid-cols-3 gap-3">
                `;

                // ç¨‹åº¦é€‰é¡¹
                item.degrees.forEach((degree, degIndex) => {
                    const uniqueId = `${impressionId}-${degIndex}`;
                    html += `
                        <div>
                            <input type="radio" id="${uniqueId}" name="${item.impression}" value="${degree.level}" 
                                class="rating-input hidden" required>
                            <label for="${uniqueId}" 
                                class="rating-label block text-center p-2 border border-indigo-400 text-indigo-700 
                                rounded-lg cursor-pointer transition duration-150 hover:bg-indigo-50 text-sm">
                                ${degree.level}
                            </label>
                        </div>
                    `;
                });

                html += `
                        </div>
                    </div>
                `;
            });

            container.innerHTML = html;
        }

        /**
         * æ ¹æ®åˆ†æ•°ç¡®å®š Pistacho ç­‰çº§
         */
        function determinePistachoGrade(score) {
            // å®šä¹‰æ¯ä¸ªç­‰çº§çš„é¢œè‰²ï¼Œç”¨äºçªå‡ºæ˜¾ç¤º
            if (score >= 95) return { grade: "P", name: "Perfection", chinese: "å®Œç¾", color: "text-yellow-500" };
            if (score >= 90) return { grade: "I", name: "Iconic", chinese: "å…¸èŒƒ", color: "text-gray-500" };
            if (score >= 85) return { grade: "S", name: "Supreme", chinese: "å“è¶Š", color: "text-amber-700" };
            if (score >= 80) return { grade: "T", name: "Treasured", chinese: "çè—", color: "text-blue-500" };
            if (score >= 70) return { grade: "A", name: "Acceptable", chinese: "å¯æ¥å—", color: "text-green-600" };
            if (score >= 60) return { grade: "C", name: "Common", chinese: "æ™®é€š", color: "text-yellow-600" };
            if (score >= 40) return { grade: "H", name: "Hardship", chinese: "ç¼ºé™·å¤š", color: "text-orange-600" };
            return { grade: "O", name: "Outright Failure", chinese: "ä¸åˆæ ¼", color: "text-red-600" };
        }

        /**
         * è®¡ç®—æœ€ç»ˆåˆ†æ•°å’Œç­‰çº§ï¼Œå¹¶å±•ç¤ºç»“æœ
         */
        function calculateAndDisplayResults() {
            let rawScoreSum = 0;
            let earnedAchievements = [];
            let missingSelections = false;

            // 1. éå†æ‰€æœ‰è¯„åˆ†é¡¹ï¼Œè®¡ç®—åˆ†æ•°å’Œæ”¶é›†æˆå°±
            CIGAR_RATING_DATA.forEach(item => {
                const selectedInput = document.querySelector(`input[name="${item.impression}"]:checked`);
                
                if (!selectedInput) {
                    missingSelections = true;
                    return; // è·³è¿‡æœªé€‰æ‹©çš„é¡¹
                }

                const selectedLevel = selectedInput.value;
                const selectedDegree = item.degrees.find(d => d.level === selectedLevel);

                if (selectedDegree) {
                    // è®¡ç®—è¯¥é¡¹çš„åŸå§‹å¾—åˆ†: æƒé‡ * ç¨‹åº¦å¾—åˆ†
                    const itemScore = item.weight * selectedDegree.score;
                    rawScoreSum += itemScore;
                    // è®°å½•æˆå°±
                    earnedAchievements.push({
                        impression: item.impression,
                        achievement: selectedDegree.achievement
                    });
                }
            });

            // 2. æ£€æŸ¥æ˜¯å¦æœ‰æœªé€‰é¡¹ç›®
            if (missingSelections) {
                // ä½¿ç”¨è‡ªå®šä¹‰æ¶ˆæ¯æ¡†ä»£æ›¿ alert
                showCustomMessage('è¯·å®Œæˆæ‰€æœ‰è¯„åˆ†é¡¹çš„å‹¾é€‰ï¼Œä»¥ä¾¿è¿›è¡Œå‡†ç¡®è®¡ç®—ã€‚');
                return;
            }

            // 3. å½’ä¸€åŒ–æ€»åˆ†åˆ° 100 åˆ†
            const finalScore = (rawScoreSum / TOTAL_WEIGHT) * 100;
            const roundedScore = Math.round(finalScore * 10) / 10; // ä¿ç•™ä¸€ä½å°æ•°
            
            // 4. ç¡®å®š Pistacho ç­‰çº§
            const finalGrade = determinePistachoGrade(roundedScore);

            // 5. æ›´æ–°ç»“æœå±•ç¤ºåŒº
            updateResultsDisplay(finalGrade, roundedScore, earnedAchievements);
            updateInfoSummary();

            // 6. æ˜¾ç¤ºç»“æœ
            document.getElementById('resultsSection').classList.remove('hidden');
        }

        /**
         * æ›´æ–°ç»“æœæ˜¾ç¤º (å®ç°å¤§å°å­—æ¯æ··åˆæ˜¾ç¤º)
         */
        function updateResultsDisplay(finalGrade, roundedScore, achievements) {
            const PISTACHO_ACRONYM = "PISTACHO";
            let acronymHtml = '';
            const mainGradeLetter = finalGrade.grade;

            // 1. æ„å»ºåŠ¨æ€ PISTACHO æ˜¾ç¤º
            for (const letter of PISTACHO_ACRONYM) {
                if (letter === mainGradeLetter) {
                    // å½“å‰è·å¾—çš„ç­‰çº§å­—æ¯ï¼šå¤§å·ã€ç²—ä½“ã€ç€è‰²
                    acronymHtml += `
                        <span class="text-6xl font-black ${finalGrade.color} translate-y-0">
                            ${letter}
                        </span>
                    `;
                } else {
                    // å…¶ä»–å­—æ¯ï¼šå°å·ã€ä¸­ç­‰ç°åº¦ã€ç•¥å¾®æŠ¬é«˜ä»¥å¯¹é½åŸºçº¿
                    acronymHtml += `
                        <span class="text-xl font-bold text-gray-400 transform translate-y-1">
                            ${letter}
                        </span>
                    `;
                }
            }
            
            // 2. æ³¨å…¥æ–°çš„ acronym display
            document.getElementById('pistachoAcronymDisplay').innerHTML = acronymHtml;

            // 3. æ›´æ–°ä¸­æ–‡ç­‰çº§å’Œåˆ†æ•°
            document.getElementById('resultGradeName').innerHTML = `${finalGrade.name} (${finalGrade.chinese})`;
            document.getElementById('resultScore').textContent = roundedScore.toFixed(1);

            const achievementList = document.getElementById('achievementList');
            achievementList.innerHTML = '';
            
            achievements.forEach(item => {
                const li = document.createElement('li');
                li.innerHTML = `<span class="font-medium text-indigo-700">${item.impression}:</span> ${item.achievement}`;
                achievementList.appendChild(li);
            });
        }

        /**
         * æ›´æ–°é›ªèŒ„ä¿¡æ¯å›é¡¾
         */
        function updateInfoSummary() {
            const infoSummary = document.getElementById('infoSummary');
            infoSummary.innerHTML = `
                <li><span class="font-medium">å“ç‰Œ:</span> ${document.getElementById('brand').value || 'æœªå¡«å†™'}</li>
                <li><span class="font-medium">å‹å·:</span> ${document.getElementById('model').value || 'æœªå¡«å†™'}</li>
                <li><span class="font-medium">å°ºå¯¸:</span> ${document.getElementById('size').value || 'æœªå¡«å†™'}</li>
                <li><span class="font-medium">äº§åœ°:</span> ${document.getElementById('origin').value || 'æœªå¡«å†™'}</li>
            `;
        }

        /**
         * è‡ªå®šä¹‰æ¶ˆæ¯æ¡†ï¼ˆæ›¿ä»£ alert()ï¼‰
         */
        function showCustomMessage(message) {
            console.error(message);
            const overlay = document.createElement('div');
            overlay.className = 'fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center';
            overlay.innerHTML = `
                <div class="bg-white p-6 rounded-xl shadow-2xl max-w-sm mx-4 transform transition-all scale-100">
                    <h4 class="text-xl font-bold text-red-600 mb-3">æç¤º (Notice)</h4>
                    <p class="text-gray-700 mb-6">${message}</p>
                    <button onclick="this.closest('.fixed').remove()" 
                        class="w-full py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition">
                        ç¡®è®¤
                    </button>
                </div>
            `;
            document.body.appendChild(overlay);
        }

        // åˆå§‹åŒ–ï¼šåœ¨é¡µé¢åŠ è½½å®Œæˆåæ¸²æŸ“è¯„åˆ†è¡¨å•
        window.onload = renderRatingForm;
    </script>
</body>
</html>
