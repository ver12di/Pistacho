<!DOCTYPE html>
<html lang="zh-Hans">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>雪茄品鉴配置管理</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        // 2. 样式修复：确保 Tailwind 配置块存在
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'Noto Sans SC', 'system-ui', 'sans-serif'],
                    },
                }
            }
        }
    </script>
    
    <script>
        // 请在此处放置您的 Firebase 配置变量
        const __app_id = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';
        const firebaseConfig = JSON.parse(typeof __firebase_config !== 'undefined' ? __firebase_config : '{}');
    </script>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { 
            getAuth, 
            signInAnonymously, 
            signInWithCustomToken, 
            onAuthStateChanged,
            signOut
        } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { 
            getFirestore, 
            doc, 
            setDoc, 
            getDoc, 
            onSnapshot, 
            collection,
            query
        } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";
        import { setLogLevel } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";
        
        // 设置 Firebase 日志级别
        // setLogLevel('Debug'); // 在开发环境可以取消注释以查看详细日志

        // 全局变量
        let app, db, auth;
        let userId = null;
        let isAuthReady = false;
        let currentConfig = null;
        
        // 确保 Firebase 配置存在
        if (Object.keys(firebaseConfig).length > 0) {
            app = initializeApp(firebaseConfig);
            db = getFirestore(app);
            auth = getAuth(app);
        } else {
            console.error("Firebase Configuration is missing.");
        }
        
        // --- Firestore 路径函数 ---
        const getConfigDocRef = (db) => {
            // 配置数据存储在应用的公共/全局设置中
            return doc(db, 'artifacts', __app_id, 'public', 'settings', 'config');
        };

        // --- 默认配置（必须与主应用读取的结构完全匹配）---
        const DEFAULT_CONFIG = {
            appTitle: "雪茄品鉴评分主应用",
            description: "记录和分享你的雪茄品鉴体验。管理员可以在此页面修改评分标准。",
            ratingCriteria: [
                {
                    key: "visual",
                    name: "外观 (Visual)",
                    maxScore: 15,
                    subCriteria: [
                        { key: "wrapper", name: "茄衣", maxScore: 5 },
                        { key: "structure", name: "结构", maxScore: 5 },
                        { key: "cap", name: "茄帽", maxScore: 5 }
                    ]
                },
                {
                    key: "pre_light_draw",
                    name: "点燃前品吸 (Pre-Light)",
                    maxScore: 10,
                    subCriteria: [
                        { key: "aroma", name: "香气", maxScore: 5 },
                        { key: "draw_resistance", name: "抽吸阻力", maxScore: 5 }
                    ]
                },
                {
                    key: "first_third",
                    name: "前段 (First Third)",
                    maxScore: 25,
                    subCriteria: [
                        { key: "burn_line", name: "燃烧线", maxScore: 5 },
                        { key: "flavor_complexity", name: "风味复杂度", maxScore: 10 },
                        { key: "strength", name: "浓度", maxScore: 10 }
                    ]
                },
                {
                    key: "mid_third",
                    name: "中段 (Mid Third)",
                    maxScore: 25,
                    subCriteria: [
                        { key: "burn_line_mid", name: "燃烧线", maxScore: 5 },
                        { key: "flavor_complexity_mid", name: "风味复杂度", maxScore: 10 },
                        { key: "strength_mid", name: "浓度", maxScore: 10 }
                    ]
                },
                {
                    key: "final_third",
                    name: "尾段 (Final Third)",
                    maxScore: 25,
                    subCriteria: [
                        { key: "final_burn_line", name: "燃烧线", maxScore: 5 },
                        { key: "final_flavor", name: "最终风味", maxScore: 10 },
                        { key: "overall_impression", name: "整体印象", maxScore: 10 }
                    ]
                }
            ]
        };


        // --- UI 渲染函数 ---

        /**
         * 渲染子评分标准 (Sub Criteria) 的输入字段
         * @param {Array<Object>} subCriteriaArr - 子标准数组
         * @param {string} criteriaKey - 父标准的 key
         * @returns {string} HTML 字符串
         */
        function renderSubCriteria(subCriteriaArr, criteriaKey) {
            if (!Array.isArray(subCriteriaArr)) subCriteriaArr = [];
            
            const subCriteriaHtml = subCriteriaArr.map((sub, index) => `
                <div class="flex items-center space-x-3 mb-2 p-3 bg-gray-50 border border-gray-200 rounded-md" data-sub-index="${index}">
                    <div class="flex-1">
                        <label class="block text-xs font-medium text-gray-500">子标准名称</label>
                        <input type="text" 
                                class="w-full p-1 border border-gray-300 rounded-md text-sm" 
                                value="${sub.name || ''}" 
                                data-criteria-key="${criteriaKey}" 
                                data-field="subCriteria.name" 
                                data-index="${index}" 
                                oninput="handleSubInputChange(this)">
                    </div>
                    <div class="w-20">
                        <label class="block text-xs font-medium text-gray-500">键 (Key)</label>
                        <input type="text" 
                                class="w-full p-1 border border-gray-300 rounded-md text-sm bg-gray-100" 
                                value="${sub.key || ''}" 
                                data-criteria-key="${criteriaKey}" 
                                data-field="subCriteria.key" 
                                data-index="${index}" 
                                oninput="handleSubInputChange(this)">
                    </div>
                    <div class="w-16">
                        <label class="block text-xs font-medium text-gray-500">满分</label>
                        <input type="number" 
                                class="w-full p-1 border border-gray-300 rounded-md text-sm" 
                                value="${sub.maxScore || 0}" 
                                data-criteria-key="${criteriaKey}" 
                                data-field="subCriteria.maxScore" 
                                data-index="${index}" 
                                oninput="handleSubInputChange(this)">
                    </div>
                    <button type="button" 
                            class="p-2 text-red-500 hover:bg-red-100 rounded-full"
                            onclick="removeSubCriteria('${criteriaKey}', ${index})">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
                    </button>
                </div>
            `).join('');

            return `
                <div class="mt-3 p-3 border border-dashed border-gray-300 rounded-lg">
                    <h4 class="text-sm font-semibold mb-2 text-gray-600">子标准列表</h4>
                    <div id="sub-criteria-list-${criteriaKey}" class="space-y-2">
                        ${subCriteriaHtml}
                    </div>
                    <button type="button" 
                            class="mt-3 text-sm text-indigo-600 font-medium hover:text-indigo-800 flex items-center"
                            onclick="addSubCriteria('${criteriaKey}')">
                        <svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path></svg>
                        添加子标准
                    </button>
                </div>
            `;
        }

        /**
         * 渲染配置表单的主体部分
         * @param {Object} config - 当前的配置数据
         */
        function renderConfigForm(config) {
            const container = document.getElementById('config-form-container');
            if (!container) return;

            // 1. 填充应用基本信息
            document.getElementById('app-title-input').value = config.appTitle || '';
            document.getElementById('app-description-input').value = config.description || '';

            // 2. 渲染评分标准
            const criteriaHtml = (config.ratingCriteria || []).map((criteria, index) => {
                const subCriteriaInputs = renderSubCriteria(criteria.subCriteria, criteria.key);
                
                return `
                    <div class="p-6 bg-white rounded-xl shadow-lg border border-indigo-200" data-index="${index}" data-criteria-key="${criteria.key}">
                        <div class="flex justify-between items-center mb-4 pb-2 border-b border-indigo-100">
                            <h3 class="text-lg font-bold text-indigo-700">评分标准 ${index + 1}</h3>
                            <button type="button" 
                                    class="text-red-500 hover:bg-red-100 p-2 rounded-full transition"
                                    onclick="removeCriteria(${index})">
                                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg>
                            </button>
                        </div>
                        
                        <div class="grid grid-cols-3 gap-4 mb-4">
                            <div>
                                <label class="block text-gray-700 font-medium text-sm">名称 (如: 前段)</label>
                                <input type="text" 
                                       class="w-full p-2 border border-gray-300 rounded-md mt-1" 
                                       value="${criteria.name || ''}" 
                                       data-field="name" 
                                       data-index="${index}" 
                                       oninput="handleCriteriaInputChange(this)">
                            </div>
                            <div>
                                <label class="block text-gray-700 font-medium text-sm">键 (Key)</label>
                                <input type="text" 
                                       class="w-full p-2 border border-gray-300 rounded-md mt-1 bg-gray-100" 
                                       value="${criteria.key || ''}" 
                                       data-field="key" 
                                       data-index="${index}" 
                                       oninput="handleCriteriaInputChange(this)">
                            </div>
                            <div>
                                <label class="block text-gray-700 font-medium text-sm">总分 (Max Score)</label>
                                <input type="number" 
                                       class="w-full p-2 border border-gray-300 rounded-md mt-1" 
                                       value="${criteria.maxScore || 0}" 
                                       data-field="maxScore" 
                                       data-index="${index}" 
                                       oninput="handleCriteriaInputChange(this)">
                            </div>
                        </div>
                        
                        ${subCriteriaInputs}
                    </div>
                `;
            }).join('');

            container.innerHTML = criteriaHtml;

            // 添加 "添加新标准" 按钮
            container.insertAdjacentHTML('beforeend', `
                <div class="mt-6 text-center">
                    <button type="button" onclick="addCriteria()" class="px-6 py-3 bg-indigo-500 text-white font-semibold rounded-lg shadow-md hover:bg-indigo-600 transition flex items-center mx-auto">
                        <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path></svg>
                        添加新的评分标准
                    </button>
                </div>
            `);
        }

        // --- 数据操作函数 (CRUD) ---

        /**
         * 加载初始配置
         */
        async function loadInitialConfig() {
            if (!db || !isAuthReady) {
                console.error("Firebase/Auth not ready.");
                return;
            }

            try {
                const configRef = getConfigDocRef(db);
                const docSnap = await getDoc(configRef);
                
                if (docSnap.exists()) {
                    currentConfig = { ...DEFAULT_CONFIG, ...docSnap.data() };
                    console.log("配置从 Firestore 加载成功。", currentConfig);
                } else {
                    currentConfig = DEFAULT_CONFIG;
                    // 如果文档不存在，自动创建一个默认文档
                    await setDoc(configRef, DEFAULT_CONFIG);
                    console.log("配置文档不存在，已使用默认配置并保存到 Firestore。", DEFAULT_CONFIG);
                }
            } catch (error) {
                console.error("加载配置失败:", error);
                // 即使加载失败，也使用默认配置
                currentConfig = DEFAULT_CONFIG;
                displayError("加载配置失败，将使用默认配置。请检查控制台了解详情。");
            }
            
            // 渲染表单
            renderConfigForm(currentConfig);
            
            document.getElementById('save-button').disabled = false;
        }

        /**
         * 从表单收集所有数据
         * @returns {Object} 结构化的配置对象
         */
        function getFormData() {
            // 1. 获取应用基本信息
            const newConfig = {
                appTitle: document.getElementById('app-title-input').value.trim(),
                description: document.getElementById('app-description-input').value.trim(),
                ratingCriteria: []
            };

            // 2. 遍历并收集评分标准 (Criteria)
            const criteriaContainers = document.querySelectorAll('#config-form-container > div[data-index]');
            
            criteriaContainers.forEach((criteriaDiv, criteriaIndex) => {
                const criteria = {
                    key: criteriaDiv.querySelector(`[data-field="key"]`).value.trim(),
                    name: criteriaDiv.querySelector(`[data-field="name"]`).value.trim(),
                    maxScore: parseInt(criteriaDiv.querySelector(`[data-field="maxScore"]`).value, 10) || 0,
                    subCriteria: []
                };

                // 3. 遍历并收集子标准 (Sub Criteria)
                const subCriteriaList = criteriaDiv.querySelector(`#sub-criteria-list-${criteria.key}`);
                if (subCriteriaList) {
                    const subCriteriaContainers = subCriteriaList.querySelectorAll('[data-sub-index]');

                    subCriteriaContainers.forEach(subDiv => {
                        const subKeyInput = subDiv.querySelector(`[data-field="subCriteria.key"]`);
                        const subNameInput = subDiv.querySelector(`[data-field="subCriteria.name"]`);
                        const subMaxScoreInput = subDiv.querySelector(`[data-field="subCriteria.maxScore"]`);

                        criteria.subCriteria.push({
                            key: subKeyInput ? subKeyInput.value.trim() : '',
                            name: subNameInput ? subNameInput.value.trim() : '',
                            maxScore: subMaxScoreInput ? (parseInt(subMaxScoreInput.value, 10) || 0) : 0,
                        });
                    });
                }
                
                newConfig.ratingCriteria.push(criteria);
            });

            return newConfig;
        }

        /**
         * 保存配置到 Firestore
         */
        window.saveConfig = async function() {
            if (!db || !isAuthReady) {
                displayError("认证未就绪，无法保存。");
                return;
            }

            const newConfig = getFormData();

            // 简单的校验
            if (newConfig.appTitle === '') {
                 displayError("应用标题不能为空。");
                 return;
            }
            if (newConfig.ratingCriteria.length === 0) {
                 displayError("评分标准至少需要一项。");
                 return;
            }
            
            document.getElementById('save-button').textContent = '正在保存...';
            document.getElementById('save-button').disabled = true;
            document.getElementById('status-message').textContent = '';

            try {
                const configRef = getConfigDocRef(db);
                await setDoc(configRef, newConfig);
                currentConfig = newConfig; // 更新本地状态
                
                document.getElementById('status-message').className = 'text-green-600 font-semibold';
                document.getElementById('status-message').textContent = '配置保存成功！';
                console.log("配置保存成功:", newConfig);

            } catch (error) {
                console.error("保存配置失败:", error);
                displayError("保存配置失败。请检查控制台了解详情。");
            } finally {
                document.getElementById('save-button').textContent = '保存配置';
                document.getElementById('save-button').disabled = false;
            }
        }
        
        // --- 动态编辑逻辑 ---
        
        /**
         * 处理应用信息和评分标准主体的输入变化
         * @param {HTMLInputElement|HTMLTextAreaElement} inputElement - 输入元素
         */
        window.handleInputChange = function(inputElement) {
            const field = inputElement.getAttribute('data-field');
            const value = field === 'appTitle' || field === 'description' ? inputElement.value : parseInt(inputElement.value, 10) || 0;

            // 这里只更新 input 元素的 value，实际的 currentConfig 更新放在 getFormData/saveConfig 中处理，
            // 以简化状态管理，避免频繁重新渲染整个表单。
        }

        /**
         * 处理评分标准主体的输入变化
         * @param {HTMLInputElement} inputElement - 输入元素
         */
        window.handleCriteriaInputChange = function(inputElement) {
            // This is handled by getFormData() when saving.
            // We just ensure the input value is updated.
        }

        /**
         * 处理子评分标准的输入变化
         * @param {HTMLInputElement} inputElement - 输入元素
         */
        window.handleSubInputChange = function(inputElement) {
            // This is handled by getFormData() when saving.
            // We just ensure the input value is updated.
        }

        /**
         * 添加一个新的评分标准
         */
        window.addCriteria = function() {
            const newCriteria = {
                key: `new_criteria_${Date.now()}`,
                name: "新评分标准",
                maxScore: 20,
                subCriteria: [
                    { key: "sub_1", name: "子项一", maxScore: 10 },
                ]
            };
            
            if (!currentConfig.ratingCriteria) {
                currentConfig.ratingCriteria = [];
            }
            currentConfig.ratingCriteria.push(newCriteria);
            renderConfigForm(currentConfig);
        }

        /**
         * 移除一个评分标准
         * @param {number} index - 评分标准在数组中的索引
         */
        window.removeCriteria = function(index) {
            if (currentConfig.ratingCriteria && currentConfig.ratingCriteria.length > index) {
                const criteriaName = currentConfig.ratingCriteria[index].name;
                if (confirmModal(`确定要删除评分标准: ${criteriaName} 吗？`)) {
                    currentConfig.ratingCriteria.splice(index, 1);
                    renderConfigForm(currentConfig);
                }
            }
        }

        /**
         * 添加一个新的子评分标准
         * @param {string} criteriaKey - 父标准的 key
         */
        window.addSubCriteria = function(criteriaKey) {
            const criteriaIndex = currentConfig.ratingCriteria.findIndex(c => c.key === criteriaKey);
            
            if (criteriaIndex !== -1) {
                const newSub = {
                    key: `sub_${Date.now()}`,
                    name: "新子标准",
                    maxScore: 10
                };
                
                if (!currentConfig.ratingCriteria[criteriaIndex].subCriteria) {
                    currentConfig.ratingCriteria[criteriaIndex].subCriteria = [];
                }
                currentConfig.ratingCriteria[criteriaIndex].subCriteria.push(newSub);
                
                // 只重新渲染该 Criteria 的子标准列表
                const subCriteriaListHtml = renderSubCriteria(currentConfig.ratingCriteria[criteriaIndex].subCriteria, criteriaKey);
                const criteriaDiv = document.querySelector(`div[data-criteria-key="${criteriaKey}"]`);
                if(criteriaDiv) {
                    const subContainer = criteriaDiv.querySelector('.mt-3.p-3.border.border-dashed.border-gray-300.rounded-lg');
                    if (subContainer) {
                         // 重新渲染整个子标准部分
                        subContainer.outerHTML = subCriteriaListHtml;
                    }
                } else {
                    renderConfigForm(currentConfig); // 实在不行就全刷新
                }
            }
        }

        /**
         * 移除一个子评分标准
         * @param {string} criteriaKey - 父标准的 key
         * @param {number} subIndex - 子标准在数组中的索引
         */
        window.removeSubCriteria = function(criteriaKey, subIndex) {
            const criteriaIndex = currentConfig.ratingCriteria.findIndex(c => c.key === criteriaKey);
            
            if (criteriaIndex !== -1 && currentConfig.ratingCriteria[criteriaIndex].subCriteria) {
                const subCriteria = currentConfig.ratingCriteria[criteriaIndex].subCriteria;
                const subName = subCriteria[subIndex].name;

                if (confirmModal(`确定要删除子标准: ${subName} 吗？`)) {
                    subCriteria.splice(subIndex, 1);
                    
                    // 只重新渲染该 Criteria 的子标准列表
                    const subCriteriaListHtml = renderSubCriteria(currentConfig.ratingCriteria[criteriaIndex].subCriteria, criteriaKey);
                    const criteriaDiv = document.querySelector(`div[data-criteria-key="${criteriaKey}"]`);
                    if(criteriaDiv) {
                        const subContainer = criteriaDiv.querySelector('.mt-3.p-3.border.border-dashed.border-gray-300.rounded-lg');
                        if (subContainer) {
                            subContainer.outerHTML = subCriteriaListHtml;
                        }
                    } else {
                        renderConfigForm(currentConfig); // 实在不行就全刷新
                    }
                }
            }
        }

        // --- 认证和初始化 ---
        
        onAuthStateChanged(auth, async (user) => {
            if (user) {
                userId = user.uid;
                isAuthReady = true;
                document.getElementById('user-id-display').textContent = `用户ID: ${userId}`;
                await loadInitialConfig();
            } else {
                userId = null;
                isAuthReady = true;
                // 对于配置页面，即使未登录/匿名用户，也应加载配置
                document.getElementById('user-id-display').textContent = '用户ID: 匿名';
                await loadInitialConfig();
            }
        });

        // 初始化认证
        window.addEventListener('load', async () => {
            try {
                if (typeof __initial_auth_token !== 'undefined' && __initial_auth_token) {
                    await signInWithCustomToken(auth, __initial_auth_token);
                } else {
                    await signInAnonymously(auth);
                }
            } catch (error) {
                console.error("Initial authentication failed:", error);
                displayError("认证失败，部分功能可能无法使用。");
                isAuthReady = true; // 确保即使认证失败，也能尝试加载默认配置
                await loadInitialConfig();
            }
        });
        
        // --- 辅助 UI 函数 ---
        
        /**
         * 显示错误消息
         * @param {string} message - 错误文本
         */
        function displayError(message) {
            const container = document.getElementById('error-container');
            container.innerHTML = `
                <div class="bg-red-100 border-l-4 border-red-500 text-red-700 p-4 mb-4 rounded-md shadow-md" role="alert">
                    <p class="font-bold">错误</p>
                    <p>${message}</p>
                </div>
            `;
            // 同时在状态消息区域显示
            document.getElementById('status-message').className = 'text-red-600 font-semibold';
            document.getElementById('status-message').textContent = `保存失败: ${message.substring(0, 50)}...`;
        }

        /**
         * 自定义确认模态框（替代 window.confirm）
         * @param {string} message - 确认消息
         * @returns {boolean} - true 如果用户确认
         */
        function confirmModal(message) {
            // 在实际应用中，这里应该显示一个 Tailwind CSS 模态框
            // 但为了兼容性，我们暂时使用简单的原生 API
            return window.confirm(message);
        }

    </script>
</head>
<body class="bg-gray-100 font-sans p-4 md:p-8">
    <div class="max-w-4xl mx-auto">
        <header class="mb-8 flex justify-between items-center">
            <h1 class="text-3xl font-extrabold text-indigo-800">雪茄品鉴配置管理</h1>
            <a href="index.html" class="px-4 py-2 text-sm font-medium rounded-lg bg-indigo-600 text-white hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition">← 返回主页</a>
        </header>
        
        <div id="error-container">
            </div>

        <!-- 应用基本信息 -->
        <section class="mb-8 p-6 bg-white rounded-xl shadow-lg">
             <h2 class="text-xl font-bold text-indigo-700 mb-4">应用基本信息</h2>
             <div class="text-xs text-gray-500 mb-4" id="user-id-display">正在认证...</div>
             <label class="block mb-4">
                 <span class="text-gray-700 font-medium">应用标题 (App Title)</span>
                 <input type="text" id="app-title-input" class="w-full p-2 border border-gray-300 rounded-md mt-1" oninput="handleInputChange(this)" data-field="appTitle" placeholder="雪茄品鉴评分主应用">
             </label>
             <label class="block mb-4">
                 <span class="text-gray-700 font-medium">应用描述 (Description)</span>
                 <textarea id="app-description-input" class="w-full p-2 border border-gray-300 rounded-md mt-1" rows="3" oninput="handleInputChange(this)" data-field="description" placeholder="记录和分享你的雪茄品鉴体验。"></textarea>
             </label>
        </section>

        <!-- 评分标准配置 -->
        <section class="mb-8 p-6 bg-white rounded-xl shadow-lg">
            <h2 class="text-xl font-bold text-indigo-700 mb-6 border-b pb-3">评分标准 (Rating Criteria)</h2>
            <p class="text-sm text-gray-500 mb-4">您可以定义主要的评分项目及其子项，确保 **键 (Key)** 值唯一且只包含字母、数字和下划线，这是程序内部识别的关键。</p>
            
            <form id="config-form">
                <section id="config-form-container" class="space-y-6">
                    <div class="p-6 text-center text-gray-500">正在加载配置...</div>
                </section>
            
                <div class="mt-8 pt-4 border-t border-gray-300 flex justify-between items-center">
                    <button type="button" 
                            id="save-button" 
                            onclick="saveConfig()" 
                            class="px-8 py-3 bg-green-600 text-white font-bold rounded-lg shadow-xl hover:bg-green-700 transition disabled:opacity-50"
                            disabled>
                        保存配置
                    </button>
                    <p id="status-message" class="text-sm text-gray-600"></p>
                </div>
            </form>
        </section>


        <footer class="mt-8 text-center text-gray-500 text-sm">
            <p>&copy; 2024 雪茄品鉴应用配置工具</p>
        </footer>
    </div>
</body>
</html>
